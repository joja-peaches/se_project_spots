!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-button",inactiveButtonClass:"modal__submit-button_inactive",inputErrorClass:"modal__error",errorClass:"modal__input-error_active"},t=(e,t,o)=>{e.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(o.errorClass)},o=(e,t)=>{e.classList.add(t.inactiveButtonClass),e.disabled=!0},r=(e,t,r)=>{(e=>e.some((e=>!e.validity.valid)))(e)?o(t,r):(t.classList.remove(r.inactiveButtonClass),t.disabled=!1)},n=e=>{document.querySelectorAll(e.formSelector).forEach((n=>{((e,n)=>{const i=Array.from(e.querySelectorAll(n.inputSelector)),l=e.querySelector(n.submitButtonSelector);r(i,l,n),e.addEventListener("submit",(()=>{o(l,n)})),i.forEach((o=>{o.addEventListener("input",(function(){((e,o,r)=>{o.validity.valid?t(e,o,r):((e,t,o,r)=>{e.querySelector(`#${t.id}-error`).textContent=o,t.classList.add(r.errorClass)})(e,o,o.validationMessage,r)})(e,o,n),r(i,l,n)}))}))})(n,e)}))};n(e);const i=document.querySelector(".profile__edit-btn"),l=document.querySelector("#edit-modal"),a=l.querySelector(".modal__close-button"),c=document.querySelector(".profile__name"),d=l.querySelector("#profile-name-input"),s=document.querySelector(".profile__description"),u=l.querySelector("#profile-description-input"),m=document.forms.namedItem("edit-profile"),p=m.querySelector("#profile-name-input"),_=m.querySelector("#profile-description-input"),S=document.querySelector("#card-template"),v=document.querySelector(".cards__list"),y=document.querySelectorAll(".modal"),f=document.querySelector(".profile__add-btn"),q=document.querySelector("#add-card-modal"),k=q.querySelector("#new-post-close-button"),L=document.forms["add-card-form"],b=L.querySelector("#add-card-link-input"),E=L.querySelector("#add-card-name-input"),C=document.querySelector("#preview-modal"),g=C.querySelector(".modal__image"),h=C.querySelector(".modal__close-button_type_preview"),x=C.querySelector(".modal__caption");function B(e){e.classList.add("modal_opened"),document.addEventListener("keydown",A)}function w(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",A)}function j(e){const t=S.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),r=t.querySelector(".card__image"),n=t.querySelector(".card__like-btn"),i=t.querySelector(".card__delete-btn");return o.textContent=e.name,r.src=e.link,r.alt=e.name,n.addEventListener("click",(()=>{n.classList.toggle("card__like-btn_liked")})),r.addEventListener("click",(()=>{B(C),g.src=r.src,g.alt=r.alt,x.textContent=r.alt})),i.addEventListener("click",(()=>{v.removeChild(t)})),t}function A(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&w(e)}}q.querySelector(".modal__submit-button"),[{name:"Venice Beach Skate Park",link:"https://iili.io/dseeBzQ.jpg"},{name:"Drinks in downtown LA",link:"https://iili.io/dseeF5b.jpg"},{name:"East Side of Los Angeles",link:"https://iili.io/dseefmx.jpg"},{name:"Mutato Muzika record production",link:"https://iili.io/dseeKej.jpg"},{name:"Southern California beaches",link:"https://iili.io/dsee3du.jpg"},{name:"Beautiful cars in Tuningen, Germany",link:"https://iili.io/dseenLB.md.jpg"}].forEach((e=>{const t=j(e);v.append(t)})),i.addEventListener("click",(()=>{var o,r;d.value=c.textContent,u.value=s.textContent,B(l),o=m,r=e,[d,u].forEach((e=>{t(o,e,r)}))})),y.forEach((e=>{e.addEventListener("mousedown",(t=>{t.target.classList.contains("modal_opened")&&w(e)}))})),a.addEventListener("click",(()=>{w(l)})),f.addEventListener("click",(()=>{B(q)})),k.addEventListener("click",(()=>{w(q)})),h.addEventListener("click",(()=>{w(C)})),m.addEventListener("submit",(function(e){e.preventDefault(),c.textContent=p.value,s.textContent=_.value,e.target.reset(),w(l)})),L.addEventListener("submit",(function(e){e.preventDefault();const t=j({name:E.value,link:b.value});v.prepend(t),w(q),e.target.reset()})),n(e)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bkIsRUFBZStCLE1BQ3JCVixLQUFNdEIsRUFBaUJnQyxRQUl6QnRDLEVBQVU4QyxRQUFRRCxHQUNsQjlCLEVBQVdaLEdBQ1g2QixFQUFJUyxPQUFPRyxPQUNiLElBMENBckUsRUFBaUIzQixFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc3VibWl0LWJ1dHRvblwiLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ1dHRvbl9pbmFjdGl2ZVwiLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXQtZXJyb3JfYWN0aXZlXCJcclxuICB9XHJcblxyXG5jb25zdCBzaG93SW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UsIGNvbmZpZykgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JNc2dFbCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGVycm9yTXNnRWwudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuZXJyb3JDbGFzcyk7XHJcbn07XHJcblxyXG5jb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcclxuICAgIGNvbnN0IGVycm9yTXNnRWwgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcbiAgICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5lcnJvckNsYXNzKTtcclxufTtcclxuXHJcbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgc2hvd0lucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLCBjb25maWcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xyXG4gICAgfVxyXG59O1xyXG5cclxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xyXG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgcmV0dXJuICFlbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5jb25zdCBkaXNhYmxlQnV0dG9uID0gKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlOyAgXHJcbn07XHJcblxyXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xyXG4gICAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICAgICAgZGlzYWJsZUJ1dHRvbihidXR0b25FbGVtZW50LCBjb25maWcpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxufTtcclxuXHJcbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50LCBjb25maWcpID0+IHtcclxuICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgY29uc3QgYnV0dG9uRWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcclxuICAgIGZvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIGRpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcclxuICAgIH0pO1xyXG4gICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcclxuICAgICAgICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgZW5hYmxlVmFsaWRhdGlvbiA9IChjb25maWcpID0+IHtcclxuICAgIGNvbnN0IGZvcm1MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKTtcclxuICAgIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgICAgICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsZW1lbnQsIGlucHV0TGlzdCwgY29uZmlnKSA9PiB7XHJcbiAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXQsIGNvbmZpZyk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpOyIsImltcG9ydCB7IHNldHRpbmdzLCBlbmFibGVWYWxpZGF0aW9uLCByZXNldFZhbGlkYXRpb24gfSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XHJcbmltcG9ydCBcIi4vaW5kZXguY3NzXCI7XHJcblxyXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJWZW5pY2UgQmVhY2ggU2thdGUgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2lpbGkuaW8vZHNlZUJ6US5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiRHJpbmtzIGluIGRvd250b3duIExBXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaWlsaS5pby9kc2VlRjViLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJFYXN0IFNpZGUgb2YgTG9zIEFuZ2VsZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9paWxpLmlvL2RzZWVmbXguanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIk11dGF0byBNdXppa2EgcmVjb3JkIHByb2R1Y3Rpb25cIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9paWxpLmlvL2RzZWVLZWouanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlNvdXRoZXJuIENhbGlmb3JuaWEgYmVhY2hlc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2lpbGkuaW8vZHNlZTNkdS5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIkJlYXV0aWZ1bCBjYXJzIGluIFR1bmluZ2VuLCBHZXJtYW55XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vaWlsaS5pby9kc2VlbkxCLm1kLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XHJcblxyXG5jb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XHJcbmNvbnN0IGVkaXRNb2RhbENsb3NlQnV0dG9uID0gZWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ1dHRvblwiKTtcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XHJcbmNvbnN0IGVkaXRNb2RhbE5hbWVJbnB1dCA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZS1pbnB1dFwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcclxuY29uc3QgZWRpdE1vZGFsRGVzY3JpcHRpb24gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcclxuKTtcclxuY29uc3QgZWRpdEZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXMubmFtZWRJdGVtKFwiZWRpdC1wcm9maWxlXCIpO1xyXG5jb25zdCBuYW1lSW5wdXQgPSBlZGl0Rm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWUtaW5wdXRcIik7XHJcbmNvbnN0IGpvYklucHV0ID0gZWRpdEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiKTtcclxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xyXG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG5jb25zdCBtb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpO1xyXG5cclxuXHJcbmNvbnN0IG5ld1Bvc3RPcGVuQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xyXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xyXG5jb25zdCBuZXdQb3N0Q2xvc2VCdXR0b24gPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIiNuZXctcG9zdC1jbG9zZS1idXR0b25cIik7XHJcblxyXG5jb25zdCBuZXdQb3N0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wiYWRkLWNhcmQtZm9ybVwiXTtcclxuY29uc3QgbmV3UG9zdEltYWdlTGluayA9IG5ld1Bvc3RGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbGluay1pbnB1dFwiKTtcclxuY29uc3QgbmV3UG9zdENhcHRpb24gPSBuZXdQb3N0Rm9ybS5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW5hbWUtaW5wdXRcIik7XHJcbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcclxuY29uc3QgcHJldmlld01vZGFsSW1nID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlXCIpO1xyXG5jb25zdCBwcmV2aWV3TW9kYWxDbG9zZSA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19jbG9zZS1idXR0b25fdHlwZV9wcmV2aWV3XCJcclxuKTtcclxuY29uc3QgcHJldmlld01vZGFsQ2FwdGlvbiA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG5cclxuY29uc3QgY2FyZFN1Ym1pdEJ1dHRvbiA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zdWJtaXQtYnV0dG9uXCIpO1xyXG5cclxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGVLZXkpIDtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcclxuICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZUtleSk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVFZGl0Rm9ybVN1Ym1pdChldnQpIHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IG5hbWVJbnB1dC52YWx1ZTtcclxuICBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBqb2JJbnB1dC52YWx1ZTtcclxuICBldnQudGFyZ2V0LnJlc2V0KCk7XHJcbiAgY2xvc2VNb2RhbChlZGl0TW9kYWwpO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZFRlbXBsYXRlLmNvbnRlbnRcclxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcclxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgY29uc3QgY2FyZE5hbWVFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgY29uc3QgY2FyZEltZ0VsID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idG5cIik7XHJcbiAgY29uc3QgY2FyZERlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ0blwiKTtcclxuXHJcbiAgY2FyZE5hbWVFbC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICBjYXJkSW1nRWwuc3JjID0gZGF0YS5saW5rO1xyXG4gIGNhcmRJbWdFbC5hbHQgPSBkYXRhLm5hbWU7XHJcblxyXG4gIGNhcmRMaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICBjYXJkTGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIik7XHJcbiAgfSk7XHJcblxyXG4gIGNhcmRJbWdFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgb3Blbk1vZGFsKHByZXZpZXdNb2RhbCk7XHJcbiAgICBwcmV2aWV3TW9kYWxJbWcuc3JjID0gY2FyZEltZ0VsLnNyYztcclxuICAgIHByZXZpZXdNb2RhbEltZy5hbHQgPSBjYXJkSW1nRWwuYWx0O1xyXG4gICAgcHJldmlld01vZGFsQ2FwdGlvbi50ZXh0Q29udGVudCA9IGNhcmRJbWdFbC5hbHQ7XHJcbiAgfSk7XHJcblxyXG4gIGNhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGNhcmRzTGlzdC5yZW1vdmVDaGlsZChjYXJkRWxlbWVudCk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRXNjYXBlS2V5KGV2dCkge1xyXG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICBjb25zdCBvcGVuTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGlmIChvcGVuTW9kYWwpIHtcclxuICAgICAgY2xvc2VNb2RhbChvcGVuTW9kYWwpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChldnQpIHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7XHJcbiAgICBuYW1lOiBuZXdQb3N0Q2FwdGlvbi52YWx1ZSxcclxuICAgIGxpbms6IG5ld1Bvc3RJbWFnZUxpbmsudmFsdWUsXHJcbiAgfTtcclxuICBjb25zdCBuZXdDYXJkID0gZ2V0Q2FyZEVsZW1lbnQoaW5wdXRWYWx1ZXMpO1xyXG5cclxuICBjYXJkc0xpc3QucHJlcGVuZChuZXdDYXJkKTtcclxuICBjbG9zZU1vZGFsKGFkZENhcmRNb2RhbCk7XHJcbiAgZXZ0LnRhcmdldC5yZXNldCgpO1xyXG59XHJcblxyXG5pbml0aWFsQ2FyZHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gIGNvbnN0IGNhcmRzRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGl0ZW0pO1xyXG4gIGNhcmRzTGlzdC5hcHBlbmQoY2FyZHNFbGVtZW50KTtcclxufSk7XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGVkaXRNb2RhbE5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gIGVkaXRNb2RhbERlc2NyaXB0aW9uLnZhbHVlID0gcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50O1xyXG4gIG9wZW5Nb2RhbChlZGl0TW9kYWwpO1xyXG4gIHJlc2V0VmFsaWRhdGlvbihlZGl0Rm9ybUVsZW1lbnQsIFtlZGl0TW9kYWxOYW1lSW5wdXQsIGVkaXRNb2RhbERlc2NyaXB0aW9uXSwgc2V0dGluZ3MpO1xyXG59KTtcclxuXHJcbm1vZGFscy5mb3JFYWNoKChwb3B1cCkgPT4ge1xyXG4gIHBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XHJcbiAgICAgIGNsb3NlTW9kYWwocG9wdXApO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59KTtcclxuXHJcblxyXG5lZGl0TW9kYWxDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNsb3NlTW9kYWwoZWRpdE1vZGFsKTtcclxufSk7XHJcblxyXG5uZXdQb3N0T3BlbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIG9wZW5Nb2RhbChhZGRDYXJkTW9kYWwpO1xyXG59KTtcclxuXHJcbm5ld1Bvc3RDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNsb3NlTW9kYWwoYWRkQ2FyZE1vZGFsKTtcclxufSk7XHJcblxyXG5wcmV2aWV3TW9kYWxDbG9zZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNsb3NlTW9kYWwocHJldmlld01vZGFsKTtcclxufSk7XHJcblxyXG5lZGl0Rm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVFZGl0Rm9ybVN1Ym1pdCk7XHJcbm5ld1Bvc3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTsiXSwibmFtZXMiOlsic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsImhpZGVJbnB1dEVycm9yIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJjb25maWciLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImRpc2FibGVCdXR0b24iLCJidXR0b25FbGVtZW50IiwiYWRkIiwiZGlzYWJsZWQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsInNvbWUiLCJlbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImVuYWJsZVZhbGlkYXRpb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJhZGRFdmVudExpc3RlbmVyIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInByb2ZpbGVFZGl0QnV0dG9uIiwiZWRpdE1vZGFsIiwiZWRpdE1vZGFsQ2xvc2VCdXR0b24iLCJwcm9maWxlTmFtZSIsImVkaXRNb2RhbE5hbWVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbiIsImVkaXRNb2RhbERlc2NyaXB0aW9uIiwiZWRpdEZvcm1FbGVtZW50IiwiZm9ybXMiLCJuYW1lZEl0ZW0iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsImNhcmRUZW1wbGF0ZSIsImNhcmRzTGlzdCIsIm1vZGFscyIsIm5ld1Bvc3RPcGVuQnV0dG9uIiwiYWRkQ2FyZE1vZGFsIiwibmV3UG9zdENsb3NlQnV0dG9uIiwibmV3UG9zdEZvcm0iLCJuZXdQb3N0SW1hZ2VMaW5rIiwibmV3UG9zdENhcHRpb24iLCJwcmV2aWV3TW9kYWwiLCJwcmV2aWV3TW9kYWxJbWciLCJwcmV2aWV3TW9kYWxDbG9zZSIsInByZXZpZXdNb2RhbENhcHRpb24iLCJvcGVuTW9kYWwiLCJtb2RhbCIsImhhbmRsZUVzY2FwZUtleSIsImNsb3NlTW9kYWwiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0Q2FyZEVsZW1lbnQiLCJkYXRhIiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZE5hbWVFbCIsImNhcmRJbWdFbCIsImNhcmRMaWtlQnV0dG9uIiwiY2FyZERlbGV0ZUJ1dHRvbiIsIm5hbWUiLCJzcmMiLCJsaW5rIiwiYWx0IiwidG9nZ2xlIiwicmVtb3ZlQ2hpbGQiLCJldnQiLCJrZXkiLCJpdGVtIiwiY2FyZHNFbGVtZW50IiwiYXBwZW5kIiwicmVzZXRWYWxpZGF0aW9uIiwidmFsdWUiLCJpbnB1dCIsInBvcHVwIiwidGFyZ2V0IiwiY29udGFpbnMiLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0IiwibmV3Q2FyZCIsInByZXBlbmQiXSwic291cmNlUm9vdCI6IiJ9